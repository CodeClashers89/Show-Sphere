{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizer Dashboard | ShowSphere Partner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap');

        :root {
            --primary-color: #8C52FF;
            --primary-hover: #7b40f2;
            --text-color: #2D2042;
            --text-light: #666666;
            --bg-color: #F9F7FF;
            --white: #FFFFFF;
            --success-green: #28a745;
            --border-radius: 12px;
            --shadow: 0 10px 25px rgba(140, 82, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        /* Header Styles */
        .header {
            background-color: var(--white);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none !important;
        }

        .logo span {
            color: var(--primary-color);
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 2rem;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        .auth-buttons {
            display: flex;
            gap: 1.1rem;
            align-items: center;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9rem;
            border: none;
            transition: all 0.3s;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid #ddd;
            color: var(--text-color);
        }

        .btn-outline:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* Navigation Bar */
        .nav-bar {
            background: linear-gradient(135deg, #8C52FF 0%, #00BFB2 100%);
            color: var(--white);
            padding: 0.8rem 2rem;
            box-shadow: 0 4px 15px rgba(140, 82, 255, 0.3);
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 3rem;
            list-style: none;
        }

        .nav-links li a {
            color: white;
            opacity: 0.8;
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Layout */
        .main-layout {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 3rem auto;
            width: 100%;
            padding: 0 1rem;
            gap: 2.5rem;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            height: fit-content;
            border: 1px solid #f0edf7;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item a {
            padding: 1.2rem 1.8rem;
            display: block;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s;
            border-bottom: 1px solid #f0edf7;
        }

        .sidebar-item:last-child a {
            border-bottom: none;
        }

        .sidebar-item a:hover {
            background: #f8f6ff;
            color: var(--primary-color);
            padding-left: 2.2rem;
        }

        .sidebar-item.active a {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 5px 15px rgba(140, 82, 255, 0.3);
        }

        /* Content Area */
        .content {
            flex: 1;
        }

        .page-title {
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--text-color);
            margin-bottom: 2.5rem;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            padding: 2rem;
            border-radius: var(--border-radius);
            color: white;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.events {
            background: #007bff;
        }

        .stat-card.shows {
            background: #28a745;
        }

        .stat-card.bookings {
            background: #17a2b8;
        }

        .stat-label {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: block;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 3rem;
            font-weight: 900;
        }

        /* Recent Bookings Section */
        .table-section {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid #f0edf7;
        }

        .table-header {
            padding: 1.5rem 2rem;
            border-bottom: 2px solid #f0edf7;
            background: #fcfbff;
        }

        .table-header h2 {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--text-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f8f7ff;
            padding: 1.2rem;
            font-size: 0.85rem;
            font-weight: 700;
            color: #b2b2b2;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: left;
            border-bottom: 1px solid #f0edf7;
        }

        td {
            padding: 1.2rem;
            font-size: 0.95rem;
            color: var(--text-color);
            border-bottom: 1px solid #f0edf7;
        }

        .empty-state {
            padding: 4rem;
            text-align: center;
            color: var(--text-light);
            font-weight: 500;
            font-size: 1.1rem;
        }

        /* Footer */
        .footer {
            background-color: #1f2533;
            color: #abb2bf;
            padding: 5rem 2rem 3rem;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1240px;
            margin: 0 auto;
        }

        .footer-logo {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .footer-logo svg {
            width: 30px;
            height: 30px;
        }

        .social-links {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 3rem;
            justify-content: center;
        }

        .social-circle {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #2d3139;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }

        .social-circle:hover {
            background: var(--primary-color);
            transform: translateY(-3px);
            color: white;
            box-shadow: 0 5px 15px rgba(140, 82, 255, 0.4);
        }

        .footer-text {
            text-align: center;
            font-size: 0.9rem;
            line-height: 1.8;
            border-top: 1px solid #2d3139;
            padding-top: 3rem;
        }

        @media (max-width: 992px) {
            .main-layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .table-section {
                overflow-x: auto;
            }

            table {
                min-width: 800px;
            }
        }
    </style>
</head>

<body>

    <!-- Header Section -->
    <header class="header">
        <a href="{% url 'booking:home' %}" class="logo">
            <img src="{% static 'css/showspere.png' %}" alt="Logo" width="40" height="40">
            <span>ShowSphere</span>
        </a>



        <div class="auth-buttons">
            <a href="{% url 'booking:organizer_register' %}" class="btn btn-outline" style="text-decoration:none;">New
                Partner</a>
            <div id="auth-section" style="display: flex; align-items: center; gap: 10px;">
                <div
                    style="background: #f0f0f5; padding: 0.4rem 1rem; border-radius: 6px; display: flex; align-items: center; gap: 8px; color: var(--text-color); font-weight: 600; cursor: pointer;">
                    {% if user.is_authenticated %}
                    <div style="background: #f0f0f5; padding: 0.4rem 1rem; border-radius: 6px; display: flex; align-items: center; gap: 8px; color: var(--text-color); font-weight: 600; cursor: pointer;"
                        onclick="window.location.href='{% url 'booking:logout' %}';">
                        ðŸ‘¤ {{ user.username }} <span
                            style="font-size: 0.8rem; opacity: 0.6; margin-left:5px;">(Logout)</span>
                    </div>
                    {% else %}
                    ðŸ‘¤ Guest
                    {% endif %}
                </div>
            </div>
        </div>
    </header>


    <!-- Main Content Layout -->
    <main class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li class="sidebar-item active"><a href="{% url 'booking:organizer_dashboard' %}">Dashboard</a></li>
                <li class="sidebar-item"><a href="{% url 'booking:manage_events' %}">Manage Events</a></li>
                <li class="sidebar-item"><a href="{% url 'booking:manage_venues' %}">Manage Venues</a></li>
                <li class="sidebar-item"><a href="{% url 'booking:organizer_analytics' %}">Analytics</a></li>
                <li class="sidebar-item"><a href="{% url 'booking:scan_ticket' %}">Scan Ticket</a></li>
            </ul>
        </aside>

        <!-- Dashboard Content -->
        <section class="content">
            <h1 class="page-title">Organizer Dashboard</h1>

            <div class="stats-grid">
                <div class="stat-card events">
                    <span class="stat-label">Total Events</span>
                    <div class="stat-value">{{ total_events }}</div>
                </div>
                <div class="stat-card shows">
                    <span class="stat-label">Active Shows</span>
                    <div class="stat-value">{{ active_shows }}</div>
                </div>
                <div class="stat-card bookings">
                    <span class="stat-label">Total Bookings</span>
                    <div class="stat-value">{{ total_bookings }}</div>
                </div>
            </div>

            <div class="table-section">
                <div class="table-header">
                    <h2>Recent Bookings</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>Event</th>
                            <th>Venue</th>
                            <th>Seats</th>
                            <th>Amount</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for booking in recent_bookings %}
                        <tr>
                            <td>{{ booking.booking_id }}</td>
                            <td>{{ booking.show.event.title }}</td>
                            <td>{{ booking.show.venue.name }}</td>
                            <td>{{ booking.seats.count }}</td>
                            <td>â‚¹{{ booking.grand_total }}</td>
                            <td>{{ booking.booking_date|date:"d M Y" }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="6" class="empty-state">No recent bookings.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <img src="{% static 'css/showspere.png' %}" alt="ShowSphere Logo" width="50" height="50"
                    fetchpriority="high" loading="eager">
                ShowSphere
            </div>

            <div class="social-links">
                <a href="https://www.facebook.com" target="_blank" class="social-circle"><i
                        class="fab fa-facebook-f"></i></a>
                <a href="https://www.linkedin.com" target="_blank" class="social-circle"><i
                        class="fab fa-linkedin-in"></i></a>
                <a href="https://www.twitter.com" target="_blank" class="social-circle"><i
                        class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com" target="_blank" class="social-circle"><i
                        class="fab fa-instagram"></i></a>
            </div>

            <p class="footer-text">
                Copyright {% now "Y" %} @ ShowSphere Entertainment Pvt. Ltd. All Rights Reserved.
                <br><br>
                The content and images used on this site are copyright protected and copyrights vests with the
                respective owners. The usage of the content and images on this website is intended to promote the works
                and endorsement of the artist shall be implied. Unauthorized use is prohibited and punishable by law.
            </p>
        </div>
    </footer>

</body>

</html>