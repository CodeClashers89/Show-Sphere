<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ShowSphere - Book Tickets Online{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <!-- Navigation -->
    {% block navbar %}
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'booking:home' %}">
                <i class="fas fa-ticket-alt me-2"></i>ShowSphere
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'booking:browse' %}">Movies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'booking:browse' %}?category=events">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'booking:browse' %}?category=sports">Sports</a>
                    </li>
                </ul>

                <form class="d-flex me-3" action="{% url 'booking:search' %}" method="get">
                    <input class="form-control me-2" type="search" placeholder="Search for Movies, Events..."
                        aria-label="Search" name="q">
                    <button class="btn btn-outline-light" type="submit">Search</button>
                </form>

                <div class="d-flex align-items-center">
                    {% if user.is_authenticated %}
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="userDropdown"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-1"></i> {{ user.username }}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            {% if user.role == 'customer' %}
                            <li><a class="dropdown-item" href="{% url 'booking:customer_dashboard' %}">My Profile</a>
                            </li>
                            <li><a class="dropdown-item" href="{% url 'booking:my_tickets' %}">My Tickets</a></li>
                            <li><a class="dropdown-item" href="{% url 'booking:booking_history' %}">Booking History</a>
                            </li>
                            {% elif user.role == 'organizer' %}
                            <li><a class="dropdown-item" href="{% url 'booking:organizer_dashboard' %}">Organizer
                                    Dashboard</a></li>
                            <li><a class="dropdown-item" href="{% url 'booking:manage_events' %}">Manage Events</a></li>
                            {% elif user.role == 'theatre_owner' %}
                            <li><a class="dropdown-item" href="{% url 'booking:theatre_dashboard' %}">Theatre
                                    Dashboard</a></li>
                            <li><a class="dropdown-item" href="{% url 'booking:manage_movies' %}">Manage Movies</a></li>
                            {% elif user.role == 'admin' %}
                            <li><a class="dropdown-item" href="{% url 'booking:admin_dashboard' %}">Admin Panel</a></li>
                            {% endif %}
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger" href="{% url 'booking:logout' %}">Logout</a></li>
                        </ul>
                    </div>
                    {% else %}
                    <a href="{% url 'booking:login' %}" class="btn btn-primary me-2">Sign In</a>
                    <a href="{% url 'booking:customer_register' %}" class="btn btn-outline-light">Sign Up</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
    {% endblock %}

    <!-- Messages -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <img src="{% static 'css/showspere.png' %}" alt="ShowSphere Logo" width="50" height="50"
                    fetchpriority="high" loading="eager">
                ShowSphere
            </div>

            <div class="social-links">
                <a href="https://www.facebook.com" target="_blank" class="social-circle"><i
                        class="fab fa-facebook-f"></i></a>
                <a href="https://www.linkedin.com" target="_blank" class="social-circle"><i
                        class="fab fa-linkedin-in"></i></a>
                <a href="https://www.twitter.com" target="_blank" class="social-circle"><i
                        class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com" target="_blank" class="social-circle"><i
                        class="fab fa-instagram"></i></a>
            </div>

            <p class="footer-text">
                Copyright {% now "Y" %} @ ShowSphere Entertainment Pvt. Ltd. All Rights Reserved.
                <br><br>
                The content and images used on this site are copyright protected and copyrights vests with the
                respective owners. The usage of the content and images on this website is intended to promote the works
                and endorsement of the artist shall be implied. Unauthorized use is prohibited and punishable by law.
            </p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>